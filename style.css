/*
* 版本: v12.0 (Refactored)
* 修改時間: 2025-09-26 17:50 (Asia/Taipei)
* 說明: 從 HTML 中分離出的獨立 CSS 檔案。
*/
:root {
  --bg:#f3f4f6; --fg:#1f2937; --muted:#6b7280; --muted-2:#9ca3af; --card:#ffffff;
  --primary:#3b82f6; --green:#16a34a; --red:#dc2626; --yellow:#f59e0b;
  --shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --radius:.5rem;
}
*{box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg);margin:0;padding:1.5rem}
.container{max-width:900px;margin:0 auto}
header{margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}
h1{font-size:1.75rem;font-weight:700;margin:0}
.muted{color:var(--muted);font-size:.9rem}
.card{background:var(--card);border-radius:var(--radius);padding:1.5rem;margin-bottom:1rem;box-shadow:var(--shadow)}
.spinner{margin:2rem auto;width:3rem;height:3rem;border-radius:50%;border:4px solid #e5e7eb;border-top-color:var(--primary);animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
pre#debug-log{background:#111827;color:#e5e7eb;font-family:monospace;font-size:.75rem;padding:1rem;border-radius:var(--radius);margin-top:1rem;height:16rem;overflow-y:auto;white-space:pre-wrap}

/* 照片牆 */
.photo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:.75rem;margin-top:1rem}
.photo-item{display:flex;flex-direction:column;gap:.25rem}
.photo-thumb{width:100%;aspect-ratio:4/3;object-fit:cover;background:#e5e7eb;border-radius:.5rem;display:block;cursor:zoom-in}
.photo-placeholder{width:100%;aspect-ratio:4/3;border-radius:.5rem;background:#f3f4f6;display:flex;align-items:center;justify-content:center;color:var(--muted-2);font-size:.9rem;text-align:center;padding:0 .5rem}

button{background:var(--primary);color:#fff;border:0;padding:.5rem .75rem;border-radius:.375rem;cursor:pointer;font-weight:600;transition:opacity .2s}
button:hover{opacity:.85}
button[disabled]{opacity:.6;cursor:not-allowed}
.button-group{display:flex;gap:.5rem;justify-content:flex-end;flex-wrap:wrap}

/* 進度總覽 */
details.schedule-accordion{border-radius:var(--radius);overflow:hidden}
details.schedule-accordion>summary{list-style:none;cursor:pointer;padding:1rem;background:#f9fafb;transition:background-color .2s;border:1px solid #e5e7eb;border-radius:var(--radius)}
details.schedule-accordion>summary::-webkit-details-marker{display:none}
details.schedule-accordion[open]>summary{border-bottom-left-radius:0;border-bottom-right-radius:0}
.progress-timeline{position:relative;width:100%;height:18px;background:#e5e7eb;border-radius:9px;overflow:hidden;margin:.5rem 0}
.progress-segment{position:absolute;height:100%}
.today-marker{position:absolute;top:-5px;width:3px;height:28px;background:var(--red);border-radius:2px;box-shadow:0 0 5px rgba(0,0,0,.3)}
.today-marker::after{content:'今天';position:absolute;top:-20px;left:50%;transform:translateX(-50%);font-size:12px;color:var(--red);font-weight:700;background:#fff;padding:0 3px;border-radius:3px}
.progress-label{font-size:.9rem}
.schedule-details{max-height:300px;overflow-y:auto;border:1px solid #e5e7eb;border-top:none;border-bottom-left-radius:var(--radius);border-bottom-right-radius:var(--radius)}
.schedule-table{width:100%;border-collapse:collapse;font-size:14px}
/* [新增] 響應式卡片列表樣式 */
/* [新增] 固定高度的滾動容器 */
.schedule-list-wrapper { max-height: 450px; overflow-y: auto; padding-right: 10px; margin: -1rem; padding: 1rem; }
.schedule-list { display: flex; flex-direction: column; gap: 1rem; }
.task-card { background: #fff; border-radius: .5rem; box-shadow: var(--shadow); padding: 1rem; display: grid; grid-template-columns: 1fr 2fr 1fr 1.5fr 1fr 1fr; gap: 1rem; align-items: center;}
.task-card > div { display: flex; flex-direction: column; gap: .25rem; }
.task-card label { font-size: .75rem; color: var(--muted); font-weight: 600; }
.task-card .task-title { font-weight: 600; font-size: .9rem; }
.task-card .task-description { font-size: .8rem; color: #4b5563; }
.task-card input, .task-card select, .task-card textarea { width: 100%; padding: .25rem; border-radius: .25rem; border: 1px solid #d1d5db; font-family: inherit; font-size: .85rem; background-color: #f9fafb; }
.task-card textarea { min-height: 50px; resize: vertical; }

/* [新增] 狀態顏色 */
/* [修改] 狀態欄位樣式，改為對整個容器上色 */
.task-card .status-cell { border-radius: .25rem; padding: .25rem; text-align: center; }
.task-card .status-cell select { background: transparent; border: none; font-weight: bold; text-align: center; -webkit-appearance: none; appearance: none; }
/* [新增] 新增與刪除按鈕樣式 */
.delete-task-btn { background-color: transparent; color: #ef4444; border: none; cursor: pointer; font-size: 1.5rem; line-height: 1; position: absolute; top: .5rem; right: .5rem; padding: 0 .5rem; }
.delete-task-btn:hover { color: #b91c1c; }
.add-task-btn { background-color: var(--primary); color: #fff; border: none; border-radius: .375rem; padding: .5rem 1rem; cursor: pointer; font-weight: 600; margin-top: 1rem; width: 100%; }
.add-task-btn:hover { opacity: 0.9; }
.task-card { position: relative; /* 為了讓刪除按鈕可以定位 */ }
.status-未完成 { background-color: #f3f4f6; color: #4b5563; }
.status-施工中 { background-color: #dbeafe; color: #1e40af; }
.status-已完成 { background-color: #dcfce7; color: #166534; }

/* [新增] 手機版響應式樣式 */
@media (max-width: 768px) {
  .task-card { grid-template-columns: 1fr 1fr; } /* 變為兩欄 */
  .task-card .task-main { grid-column: 1 / -1; } /* 任務項目/說明佔滿整行 */
  .task-card .task-dates { grid-column: 1 / -1; } /* 日期佔滿整行 */
  .task-card .task-remarks { grid-column: 1 / -1; } /* 備註佔滿整行 */
}
.schedule-table th{background:#f9fafb;font-weight:600;position:sticky;top:0;z-index:1}
.schedule-table tr:last-child td{border-bottom:none}
.status-badge{font-weight:700;padding:.25rem .5rem;border-radius:99px;font-size:12px;display:inline-block}
.clickable-work-type{cursor:pointer;text-decoration:underline;color:var(--primary)}

/* Lightbox */
#lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;padding:1rem}
#lightbox.open{display:flex}
#lightbox .lb-wrap{position:relative;max-width:98vw;max-height:95vh;display:flex;align-items:center;justify-content:center}
#lightbox img.lb-img{display:block;max-width:98vw;max-height:95vh;object-fit:contain;border-radius:.5rem;background:#fff;box-shadow:0 4px 20px rgba(0,0,0,.6)}
#lightbox button.lb-close{position:absolute;top:-.5rem;right:-.5rem;background:rgba(0,0,0,.6);color:#fff;border:0;border-radius:9999px;width:40px;height:40px;cursor:pointer;font-size:20px;line-height:40px;text-align:center}

/* 照片管理 Modal */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background:rgba(0,0,0,.6);align-items:center;justify-content:center}
.modal-content{background:#fefefe;padding:20px;border-radius:.5rem;width:90%;max-width:800px;box-shadow:0 4px 20px rgba(0,0,0,.4)}
.modal-photo-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;max-height:60vh;overflow-y:auto;padding:1rem;background:#f3f4f6;border-radius:var(--radius)}
.modal-photo-item{position:relative}
.modal-photo-item img{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:.25rem}
.delete-photo-btn{position:absolute;top:5px;right:5px;background:rgba(239,68,68,.8);color:#fff;border:2px solid #fff;border-radius:50%;width:28px;height:28px;cursor:pointer;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:center;line-height:1;transition:transform .2s}
.delete-photo-btn:hover{transform:scale(1.1)}

/*
* 版本: v12.4
* 修改時間: 2025-09-27 10:24 (Asia/Taipei)
* 說明: 新增骨架屏 (Skeleton Screen) 相關樣式。
*/

/* 骨架屏容器 */
.skeleton-wrapper {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* 骨架卡片 */
.skeleton-card {
  background-color: #ffffff;
  border-radius: var(--radius);
  padding: 1.5rem;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* 骨架線條 */
.skeleton {
  background-color: #e5e7eb;
  border-radius: 0.25rem;
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* 脈動動畫 */
@keyframes pulse {
  50% {
    opacity: .5;
  }
}

.skeleton.title {
  width: 40%;
  height: 1.75rem;
  margin-bottom: 0.5rem;
}

.skeleton.line {
  width: 100%;
  height: 0.875rem;
}

.skeleton.line-short {
  width: 60%;
  height: 0.875rem;
}
